
@using PagedList.Mvc
@model PagedList.IPagedList<MatrizTributaria.Models.TributacaoGeralView>
@{ ViewBag.Title = "TributacaoNcm"; }


<div class="container-fluid pr-container pr-card-cad">
    <div class="card mt-2">
        <div class="card-header">
            Manuntenção de Tributação por NCM: LISTAGEM
            @RenderPage("~/Views/Acoes/botoesTribNCM.cshtml")
            <button data-toggle="tooltip" data-placement="right" title="Alterar Selecionado(s)" type="button" id="editarSelecionadosTribNCM" class="float-lg-right dis-block btn btn-secondary pr-botoes-fundo border-0"> <i style="font-size:1.5em;" class="fas fa-edit"></i></button>
            <button data-toggle="tooltip" data-placement="right" title="Alterar por NCM" type="button" id="editarPorNcmTribNcm" class="float-lg-right dis-block btn btn-secondary pr-botoes-fundo border-0"> <i style="font-size:1.5em;" class="fas fa-box"></i></button>

        </div><!--fim do cabeçalho-->

        <div class="card-body">
            <div class="container-fluid">
                <div class="row">
                    @* @RenderPage("~/Views/Acoes/Botoes.cshtml") <!--Renderiza os botões de ação-->*@
                    <div class="col-lg-12">
                        <div class="container-fluid p-1">
                            @using (Html.BeginForm("TributacaoNcm", "Tributacao", FormMethod.Get))
                            {
                            @RenderPage("~/Views/Acoes/CamposComunsTribNCM.cshtml") <!--Renderiza os botões de ação-->}
                            <div style="overflow-x:auto !important;">
                                <table style="border-bottom: 1px solid #111; display: block; overflow-x: auto; border-collapse: collapse; white-space: nowrap;" class="table table-striped table-hover" id="tablepr-2">
                                    <thead style="font-size: 12px; color: #ffffff; font-weight: 100 !important" class="pr-thead">
                                        <tr>
                                            <th style="text-align:center; border:none;" colspan="7" class="pr-fonte2 pr-thtd prn-borderEspecial" scope="col">PRODUTO</th>

                                            <th style="text-align:center; border:none;" colspan="2" class="pr-fonte2 pr-thtd prn-borderEspecial" scope="col">PIS de Saída</th>
                                            <th style="text-align:center; border:none;" colspan="2" class="pr-fonte2 pr-thtd prn-borderEspecial" scope="col">Cofins de Saída</th>

                                            <th style="text-align:center; border:none;" colspan="5" class="pr-fonte2 pr-thtd prn-borderEspecial" scope="col">ICMS Venda no varejo para Consumidor Final</th>
                                            <th style="text-align:center; border:none;" colspan="5" class="pr-fonte2 pr-thtd prn-borderEspecial" scope="col">ICMS Venda no varejo para Contribuinte</th>
                                            <th style="text-align:center; border:none;" colspan="5" class="pr-fonte2 pr-thtd prn-borderEspecial" scope="col">ICMS Venda no atacado para Contribuinte</th>
                                            <th style="text-align:center; border:none;" colspan="5" class="pr-fonte2 pr-thtd prn-borderEspecial" scope="col">ICMS Venda no atacado para Simples Nacional</th>


                                        </tr>
                                        <tr>
                                            <th scope="col" class="pr-actionlink">
                                                ID Prod.
                                            </th>
                                            <th scope="col">
                                                Código de Barras
                                            </th>
                                            <th scope="col" class="pr-actionlink">

                                                @if (ViewBag.ParametroProduto == "Produto_asc")
                                                {
                                                    <i style="font-size:1.1em;" class="fas fa-sort-up pr-actionlink"></i>
                                                    @Html.ActionLink("Tributacao", "TributacaoNcm",
                                                   new
                                                   {
                                                       filtroCorrente = ViewBag.FiltroCorrente,
                                                       numeroLinhas = ViewBag.NumeroLinhas,
                                                       filtroCorrenteNCM = ViewBag.FiltroCorrenteNCM,
                                                       filtroCorrenteCEST = ViewBag.FiltroCorrenteCEST,
                                                       filtroSetor = ViewBag.FiltroCorrenteSetor,
                                                       filtroCorrenteAudNCM = ViewBag.FiltroCorrenteAuditado,
                                                       ordenacao = ViewBag.ParametroProduto,
                                                       filtroCate = ViewBag.FiltroCorrenteCate,
                                                       filtraPor = ViewBag.FiltroFiltraPor,
                                                       filtraCST = ViewBag.FiltroCST
                                                   }) }
                                                else
                                                {
                                                    <i style="font-size:1.1em;" class="fas fa-sort-down pr-actionlink"></i>
                                                    @Html.ActionLink("Tributacao", "TributacaoNcm",
                                                   new
                                                   {
                                                       filtroCorrente = ViewBag.FiltroCorrente,
                                                       numeroLinhas = ViewBag.NumeroLinhas,
                                                       filtroCorrenteNCM = ViewBag.FiltroCorrenteNCM,
                                                       filtroCorrenteCEST = ViewBag.FiltroCorrenteCEST,
                                                       filtroSetor = ViewBag.FiltroCorrenteSetor,
                                                       filtroCorrenteAudNCM = ViewBag.FiltroCorrenteAuditado,
                                                       ordenacao = ViewBag.ParametroProduto,
                                                       filtroCate = ViewBag.FiltroCorrenteCate,
                                                       filtraPor = ViewBag.FiltroFiltraPor,
                                                       filtraCST = ViewBag.FiltroCST
                                                   })}

                                            </th>
                                            @if (ViewBag.FiltrarPor == "Setor")
                                            {
                                                <th scope="col">Setor</th>
                                            }
                                            else
                                            {
                                                <th scope="col">Categoria</th>
                                            }

                                            <th scope="col">Cest</th>
                                            <th scope="col">NCM</th>
                                            <th scope="col" class="text-center prn-borderEspecial3">Auditado</th>

                                            <th scope="col" class="text-center">CST</th>
                                            <th scope="col" class="text-center prn-borderEspecial3">Aliq(%)</th>

                                            <th scope="col" class="text-center">CST</th>
                                            <th scope="col" class="text-center prn-borderEspecial3">Aliq(%)</th>


                                            <th scope="col" class="text-center">CST</th>
                                          
                                            <th scope="col" class="text-center">Aliq(%)</th>
                                            <th scope="col" class="text-center">Aliq ST(%)</th>
                                            <th scope="col" class="text-center">Red.(%)</th>
                                            <th scope="col" class="text-center prn-borderEspecial3">Red. ST(%)</th>

                                            <th scope="col" class="text-center">CST</th>
                                          
                                            <th scope="col" class="text-center">Aliq(%)</th>
                                            <th scope="col" class="text-center">Aliq ST(%)</th>
                                            <th scope="col" class="text-center">Red.(%)</th>
                                            <th scope="col" class="text-center prn-borderEspecial3">Red. ST(%)</th>


                                            <th scope="col" class="text-center">CST</th>
                                           
                                            <th scope="col" class="text-center">Aliq(%)</th>
                                            <th scope="col" class="text-center">Aliq ST(%)</th>
                                            <th scope="col" class="text-center">Red.(%)</th>
                                            <th scope="col" class="text-center prn-borderEspecial3">Red. ST(%)</th>


                                            <th scope="col" class="text-center">CST</th>
                                            
                                            <th scope="col" class="text-center">Aliq(%)</th>
                                            <th scope="col" class="text-center">Aliq ST(%)</th>
                                            <th scope="col" class="text-center">Red.(%)</th>
                                            <th scope="col" class="text-center prn-borderEspecial3">Red. ST(%)</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var item in Model)
                                        {
                                        <tr class="pr-td">
                                            <td style="width:5%" class="text-center prn-borderEspecial2">
                                                @Html.DisplayFor(modelItem => item.ID_PRODUTO)
                                            </td>
                                            <td style="width:8%" class="text-left prn-borderEspecial2">
                                                @Html.DisplayFor(modelItem => item.COD_BARRAS_PRODUTO)
                                            </td>
                                            <td style="width:20%" class="text-left prn-borderEspecial2">
                                                @Html.DisplayFor(modelItem => item.DESCRICAO_PRODUTO)
                                            </td>
                                            @if (ViewBag.FiltrarPor == "Setor")
                                            {
                                                <td style="width:50%" class="text-left prn-borderEspecial2">
                                                    @Html.DisplayFor(modelItem => item.DESCRICAO_SETOR_PRODUTO)
                                                </td>
                                            }
                                            else
                                            {
                                                <td style="width:50%" class="text-left prn-borderEspecial2">
                                                    @Html.DisplayFor(modelItem => item.CATEGORIA_DESCRICAO)
                                                </td>
                                            }

                                            <td style="width:10%;" class="text-center prn-borderEspecial2">
                                                @item.CEST_PRODUTO
                                            </td>
                                            <td style="width:10%;" class="text-center prn-borderEspecial2">
                                                @item.NCM_PRODUTO
                                            </td>
                                            <td style="width:4%;" class="text-center prn-borderEspecial4">
                                                @if (@item.AUDITADO_POR_NCM == 1)
                                                {
                                                    <span>SIM</span> }
                                                else
                                                {
                                                    <span>NÃO</span>}
                                            </td>

                                            <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                @item.CST_SAIDA_PISCOFINS
                                            </td>
                                           
                                            <td style="width:5%;" class="text-center prn-borderEspecial4">
                                                @item.ALIQ_SAIDA_PIS
                                            </td>

                                            <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                @item.CST_SAIDA_PISCOFINS
                                            </td>
                                           

                                            <td style="width:5%;" class="text-center prn-borderEspecial4">
                                                @item.ALIQ_SAIDA_COFINS
                                            </td>




                                            <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                @item.CST_VENDA_VAREJO_CONS_FINAL
                                            </td>
                                           
                                            <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                @item.ALIQ_ICMS_VENDA_VAREJO_CONS_FINAL
                                            </td>
                                            <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                @item.ALIQ_ICMS_ST_VENDA_VAREJO_CONS_FINAL
                                            </td>
                                            <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                @item.RED_BASE_CALC_ICMS_VENDA_VAREJO_CONS_FINAL
                                            </td>
                                            <td style="width:5%;" class="text-center prn-borderEspecial4">
                                                @item.RED_BASE_CALC_ICMS_ST_VENDA_VAREJO_CONS_FINAL
                                            </td>

                                            <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                @item.CST_VENDA_VAREJO_CONT
                                            </td>
                                           
                                            <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                @item.ALIQ_ICMS_VENDA_VAREJO_CONT
                                            </td>
                                            <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                @item.ALIQ_ICMS_ST_VENDA_VAREJO_CONT
                                            </td>
                                            <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                @item.RED_BASE_CALC_VENDA_VAREJO_CONT
                                            </td>
                                            <td style="width:5%;" class="text-center prn-borderEspecial4">
                                                @item.RED_BASE_CALC_ST_VENDA_VAREJO_CONT
                                            </td>

                                            <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                @item.CST_VENDA_ATA_CONT
                                            </td>
                                          
                                            <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                @item.ALIQ_ICMS_VENDA_ATA_CONT
                                            </td>
                                            <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                @item.ALIQ_ICMS_ST_VENDA_ATA_CONT
                                            </td>
                                            <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                @item.RED_BASE_CALC_ICMS_VENDA_ATA_CONT
                                            </td>
                                            <td style="width:5%;" class="text-center prn-borderEspecial4">
                                                @item.RED_BASE_CALC_ICMS_ST_VENDA_ATA_CONT
                                            </td>


                                            <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                @item.CST_VENDA_ATA_SIMP_NACIONAL
                                            </td>
                                           
                                            <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                @item.ALIQ_ICMS_VENDA_ATA_SIMP_NACIONAL
                                            </td>
                                            <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                @item.ALIQ_ICMS_ST_VENDA_ATA_SIMP_NACIONAL
                                            </td>
                                            <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                @item.RED_BASE_CALC_ICMS_VENDA_ATA_SIMP_NACIONAL
                                            </td>
                                            <td style="width:5%;" class="text-center prn-borderEspecial4">
                                                @item.RED_BASE_CALC_ICMS_ST_VENDA_ATA_SIMP_NACIONAL
                                            </td>
                                        </tr>
}
                                    </tbody>
                                </table>
                            </div>


                            @*<table style="border-bottom: 1px solid #111; overflow-x: scroll" class="table table-striped table-hover" id="tablepr-2">
                                                                <thead style="font-size:12px; color:#ffffff; font-weight:100 !important;" class="pr-thead">

                                                                    <tr>
                                                                        <th>
                                                                            Reg
                                                                        </th>
                                                                        <th>Estado</th>
                                                                        <th class="pr-actionlink">
                                                                            <i style="font-size:1.1em;" class="fas fa-sort pr-actionlink"></i> @Html.ActionLink("Produto", "Index", new { sortOrder = ViewBag.ProdutoParam })
                                                                        </th>

                                                                        <th>Pis - E</th>
                                                                        <th>Pis - S</th>
                                                                        <th>Cofins - E</th>
                                                                        <th>Cofins - S</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    @foreach (var item in Model)
                                                                    {
                                                        <tr class="pr-td">
                                                            <td style="width:5%;">
                                                                @Html.DisplayFor(modelItem => item.ID)
                                                            </td>
                                                            <td style="width:5%;">
                                                                @Html.DisplayFor(modelItem => item.ESTADO)
                                                            </td>
                                                            <td style="width:20%;">
                                                                @Html.DisplayFor(modelItem => item.DESCRICAO_PRODUTO)
                                                            </td>

                                                            <td style="width:5%">
                                                                @Html.DisplayFor(modelItem => item.ALIQ_ENT_PIS)
                                                            </td>
                                                            <td style="width:5%">
                                                                @Html.DisplayFor(modelItem => item.ALIQ_SAIDA_PIS)
                                                            </td>
                                                            <td style="width:5%">
                                                                @Html.DisplayFor(modelItem => item.ALIQ_ENT_COFINS)
                                                            </td>
                                                            <td style="width:5%">
                                                                @Html.DisplayFor(modelItem => item.ALIQ_SAIDA_COFINS)
                                                            </td>

                                                        </tr>
                                }
                                                                </tbody>
                                                            </table>*@
                            <div class="d-flex">
                                <div class="mr-auto p-1">

                                    <p class="pr-fontanternativa">

                                        <span class="pr-fontalternativa">Página @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) de @Model.PageCount - Total de registros: @Model.TotalItemCount</span>
                                    </p>
                                </div>

                                <div style="float:right;" class="p-1 pr-fontalternativa">
                                    @Html.PagedListPager(
                                                        Model,
                                                        page => Url.Action("TributacaoNcm",
                                                        new
                                                        {
                                                            page,
                                                            filtroCorrente = ViewBag.FiltroCorrente,
                                                            numeroLinhas = ViewBag.NumeroLinhas,
                                                            filtroCorrenteNCM = ViewBag.FiltroCorrenteNCM,
                                                            filtroCorrenteCEST = ViewBag.FiltroCorrenteCEST,
                                                            filtroSetor = ViewBag.FiltroCorrenteSetor,
                                                            filtroCorrenteAudNCM = ViewBag.FiltroCorrenteAuditado,
                                                            ordenacao = ViewBag.ParametroProduto,
                                                            filtroCate = ViewBag.FiltroCorrenteCate,
                                                            filtraPor = ViewBag.FiltroFiltraPor,
                                                            filtraCST = ViewBag.FiltroCST

                                                        }),
                                                        new PagedListRenderOptions()
                                                        {
                                                            LiElementClasses = new List<string> { "page-item" }
                                                        })
                                </div>

                            </div>
                        </div><!--Fim do container da coluna-->
                    </div><!--Fim da primeira coluna 12-->

                </div><!--fim da linha-->

            </div><!--fim do container do body do card-->

        </div><!--Fim do corpo do card-->
        <div class="card-footer">
            Linha(s) selecionada(s) <span style="font-weight:600; font-size:1.3em;">+</span> &nbsp; <i style="font-size:1.3em;" class="fas fa-user-edit"></i>  <span style="font-weight:600; font-size:1.3em;">=</span> Edição em massa informando Dados MANUALMENTE <br />
            Uma linha selecionada <span style="font-weight:600; font-size:1.3em;">+</span> &nbsp; <i style="font-size:1.5em;" class="fas fa-box"></i>  <span style="font-weight:600; font-size:1.3em;">=</span> Edição em massa alterando todos com o MESMO NCM <br />

        </div>
    </div><!--fim do card-->


</div><!--fim do container-->
